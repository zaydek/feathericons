.foo {
  background-color: #fff;
  transition: 500ms background-color ease-out;
}
:root[data-theme=dark] .foo {
  background-color: #000;
}
:root:not([data-theme-effect]) .foo {
  transition: 100ms background-color ease-out;
}

:root {
  background-color: #fff;
  transition: 500ms background-color ease-out;
}
:root[data-theme=dark] {
  background-color: #000;
}

:root:not([data-theme-effect]) {
  transition: 100ms background-color ease-out;
}
